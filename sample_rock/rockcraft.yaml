# Copyright 2023 Canonical Ltd.
# See LICENSE file for licensing details.
name: flask-app
summary: A flask sample app
description: OCI image for the sample flask app
version: "0.1"
base: bare
build-base: ubuntu:22.04
license: Apache-2.0
platforms:
  amd64:

parts:
  flask-dependencies:
    plugin: python
    source: .
    stage-packages:
      - python3-venv
      - python3-gunicorn
    python-requirements:
      - sample-app/requirements.txt
    override-prime: |
      craftctl default
      sed -i 's/include-system-site-packages = false/include-system-site-packages = true/g' "$CRAFT_PRIME/pyvenv.cfg"
  flask-app:
    plugin: dump
    source: .
    organize:
      sample-app: srv/flask/app
    prime:
      - srv/flask/app
